import{c as S,o as a,a as i,r as q,n as z,b as x,w as b,d as o,t as h,e as d,f as N,_ as L,g as H,u as O,h as W,v as P,i as y,F as D,j as E,k as B,l as U,m as R,p as G}from"./index-eDKA-03w.js";const J="/habits-tracker/habit.png",K=["title","aria-label"],Z={__name:"IconButton",props:{theme:{type:String,default:"primary"},title:{type:String,default:""}},setup(t){const e=t,l=S(()=>{switch(e.theme){case"primary":return"hover:fill-primary-500 focus-visible:fill-primary-500 outline-primary-500/50";case"white":return"fill-white hover:fill-white-200 focus-visible:fill-white-200 outline-white-300/50";default:throw new Error(`Unexpected theme ${e.theme}`)}});return(r,$)=>(a(),i("button",{type:"button",class:z(["size-9 shrink-0 p-2 rounded-full transition-all",l.value]),title:t.title,"aria-label":t.title},[q(r.$slots,"default")],10,K))}},Q=o("svg",{class:"size-full",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[o("path",{d:"M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2Z"})],-1),X={__name:"AddButton",setup(t){return(e,l)=>(a(),x(Z,{theme:"white"},{default:b(()=>[Q]),_:1}))}},ee={class:"mb-4"},te={class:"flex gap-2"},le={__name:"DeletionConfirmation",props:{name:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,l)=>(a(),i("form",{onSubmit:l[1]||(l[1]=H(r=>e.$emit("confirm"),["prevent"])),class:"bg-white rounded p-5 sm:p-8 relative"},[o("p",ee,h(e.$t("deleteRoutineConfirmation",{routine:t.name})),1),o("div",te,[d(L,{type:"submit",theme:"success"},{default:b(()=>[N(h(e.$t("yes")),1)]),_:1}),d(L,{type:"cancel",theme:"danger",onClick:l[0]||(l[0]=r=>e.$emit("cancel"))},{default:b(()=>[N(' $t("no") ')]),_:1})])],32))}},ne=o("svg",{class:"size-full",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[o("path",{d:"M18.968 6.416 13.4 11.984l5.568 5.568-1.416 1.416-5.568-5.568-5.568 5.568L5 17.552l5.568-5.568L5 6.416 6.416 5l5.568 5.568L17.552 5z"}),o("path",{d:"m13.41 12 6.3-6.29a1.004 1.004 0 1 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 0 0-1.42 1.42l6.3 6.29-6.3 6.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l6.29-6.3 6.29 6.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12Z"})],-1),ae={__name:"CloseButton",setup(t){return(e,l)=>(a(),x(Z,null,{default:b(()=>[ne]),_:1}))}},M={__name:"InputText",props:{modelValue:{type:String},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=O(t,"modelValue");return(l,r)=>W((a(),i("input",{class:"p-2 focus-within:outline-primary-500 focus-within:outline-2 outline outline-1 rounded-sm",type:"text","onUpdate:modelValue":r[0]||(r[0]=$=>e.value=$)},null,512)),[[P,e.value]])}},oe={class:"flex flex-col relative"},se=["onClick"],A={__name:"InputDatalist",props:{modelValue:{type:String,default:""},name:{type:String,default:""},placeholder:{type:String,default:""},options:{type:Array,default:()=>[]}},emits:["update:model-value"],setup(t,{emit:e}){const l=t,r=e,$=y(!1);function w(c,s){const p=c.toLowerCase();return s.toLowerCase().includes(p)}const m=S(()=>l.options.filter(c=>w(l.modelValue,c)));function g(c){$.value=!1,r("update:model-value",c)}return(c,s)=>(a(),i("div",oe,[d(M,{"model-value":t.modelValue,name:t.name,placeholder:t.placeholder,class:"peer","onUpdate:modelValue":g,onFocus:s[0]||(s[0]=p=>$.value=!0)},null,8,["model-value","name","placeholder"]),m.value.length>0?(a(),i("div",{key:0,class:z(["absolute peer-focus-visible:visible flex-col outline inset-x-0 top-full bg-white outline-1 flex",$.value?"visible":"invisible"])},[(a(!0),i(D,null,E(m.value,p=>(a(),i("button",{key:p,type:"button",class:z(["text-left px-2 hover:bg-primary-200",t.modelValue===p?"bg-primary-400 text-white":"bg-white"]),onFocus:s[1]||(s[1]=C=>$.value=!0),onClick:C=>g(p)},h(p),43,se))),128))],2)):B("",!0)]))}},ue={__name:"EditRoutineForm",props:{name:{type:String,required:!0}},emits:["close","submit"],setup(t,{emit:e}){const l=t,r=e,{routines:$,categories:w}=U(),m=S(()=>$.find(v=>v.name===l.name)),g=y(m.value.name),c=y(m.value.category),s=y(m.value.startDate);function p(){r("submit",{oldName:l.name,newName:g.value,category:c.value,startDate:s.value})}function C(v){s.value=v}return(v,_)=>(a(),i("form",{class:"bg-white rounded p-8 relative flex flex-col gap-y-4",onSubmit:H(p,["prevent"])},[d(ae,{class:"absolute top-0 right-0",title:v.$t("closeWindow"),onClick:_[0]||(_[0]=k=>v.$emit("close"))},null,8,["title"]),o("p",null,h(v.$t("editingRoutine",{routine:t.name})),1),d(M,{modelValue:g.value,"onUpdate:modelValue":_[1]||(_[1]=k=>g.value=k),placeholder:v.$t("enterNewName")},null,8,["modelValue","placeholder"]),d(A,{modelValue:c.value,"onUpdate:modelValue":_[2]||(_[2]=k=>c.value=k),placeholder:v.$t("chooseCategory"),options:R(w)},null,8,["modelValue","placeholder","options"]),d(M,{"model-value":s.value,type:"date",placeholder:v.$t("enterStartDate"),"onUpdate:modelValue":C},null,8,["model-value","placeholder"]),d(L,null,{default:b(()=>[N(h(v.$t("update")),1)]),_:1})],32))}},ie=o("svg",{class:"size-full",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[o("path",{d:"M13 2a3 3 0 0 1 3 3v1h4a1 1 0 0 1 0 2h-1v11a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V8H4a1 1 0 1 1 0-2h4V5a3 3 0 0 1 3-3Zm4 6H7v11a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V8Zm-7 2a1 1 0 0 1 1 1v6a1 1 0 0 1-2 0v-6a1 1 0 0 1 1-1Zm4 0a1 1 0 0 1 1 1v6a1 1 0 0 1-2 0v-6a1 1 0 0 1 1-1Zm-1-6h-2a1 1 0 0 0-1 1v1h4V5a1 1 0 0 0-1-1Z"})],-1),re={__name:"DeleteButton",setup(t){return(e,l)=>(a(),x(Z,null,{default:b(()=>[ie]),_:1}))}},de=o("svg",{class:"size-full",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[o("path",{d:"M16.76 2a1 1 0 0 1 .61.203l.1.087 4.24 4.24a1 1 0 0 1 .282.578L22 7.24l-.07.05a.7.7 0 0 1 0 .14 1 1 0 0 1 0 .24 1.19 1.19 0 0 1-.134.228L21.71 8l-2.84 2.78L8 21.71a1 1 0 0 1-.64.29H3a1 1 0 0 1-.993-.883L2 21v-4.24a1 1 0 0 1 .203-.61l.087-.1L16.05 2.29a1 1 0 0 1 .71-.29Zm-2.83 5.24L4 17.17V20h2.83l9.93-9.93-2.83-2.83Zm2.83-2.82-1.42 1.41 2.83 2.83 1.41-1.42-2.82-2.82Z"})],-1),me={__name:"EditButton",setup(t){return(e,l)=>(a(),x(Z,null,{default:b(()=>[de]),_:1}))}},ce={class:"flex items-center"},pe={class:"mr-auto ml-2"},ve={__name:"RoutinePill",props:{routine:{type:Object,required:!0}},emits:["delete","edit"],setup(t){return(e,l)=>(a(),i("div",ce,[o("p",pe,h(t.routine.name),1),o("p",null,h(t.routine.startDate),1),d(me,{onClick:l[0]||(l[0]=r=>e.$emit("edit")),title:e.$t("editRoutine")},null,8,["title"]),d(re,{onClick:l[1]||(l[1]=r=>e.$emit("delete")),title:e.$t("deleteRoutine")},null,8,["title"])]))}},fe={class:"mx-auto max-w-5xl w-full lg:p-8 p-5 mb-12 flex flex-col gap-y-4 relative"},he={class:"font-semibold text-2xl"},ge=o("img",{src:J,class:"size-10 absolute sm:-left-4 right-4 opacity-20",alt:"logo"},null,-1),$e={class:"font-semibold flex items-center text-lg bg-primary text-white pl-2 rounded-t-sm"},ye={key:0},we={key:1,class:"text-xl"},_e={key:0,class:"absolute z-10 bg-black/50 inset-0 h-svh flex items-center justify-center px-5"},Ce={__name:"Index",setup(t){const e=U(),{createNewRoutine:l,deleteRoutine:r,editRoutine:$}=U(),w=y(""),m=y(""),g=y(!1),c=y(""),s=y(!1),p=y(""),C=y(null),v=S(()=>e.categories.map(n=>({category:n,routines:e.routines.filter(u=>u.category===n)}))),_=S(()=>{const n=e.routines.some(u=>u.name===w.value);return w.value.trim().length===0||m.value.trim().length===0||n});function k(n){p.value=n,s.value=!0}function F(n){c.value=n,g.value=!0}function I({oldName:n,newName:u,category:f,startDate:V}){$({newName:u,oldName:n,category:f,startDate:V}),g.value=!1}function T(n){m.value=n,C.value.$el.focus()}function Y(){const n=G();l({name:w.value,category:m.value,date:n}),w.value="",m.value=""}return(n,u)=>(a(),i(D,null,[o("main",fe,[o("h1",he,h(n.$t("myRoutines")),1),ge,o("p",null,h(n.$t("categoriesAndRoutinesWereAdded",{routines:R(e).routines.length,categories:R(e).categories.length})),1),(a(!0),i(D,null,E(v.value,f=>(a(),i("div",{key:f,class:"border border-primary rounded-sm"},[o("h2",$e,[N(h(f.category)+" ",1),d(X,{class:"ml-auto",title:n.$t("addRoutineToThisCategory"),onClick:V=>T(f.category)},null,8,["title","onClick"])]),(a(!0),i(D,null,E(f.routines,V=>(a(),x(ve,{key:V.name,routine:V,onDelete:j=>k(V.name),onEdit:j=>F(V.name)},null,8,["routine","onDelete","onEdit"]))),128))]))),128)),R(e).routines.length===0?(a(),i("div",ye,h(n.$t("addYourFirstRoutine")),1)):(a(),i("h2",we,h(n.$t("addMoreRoutinesAndCategories")),1)),o("form",{class:"grid lg:grid-cols-3 gap-4",onSubmit:H(Y,["prevent"])},[d(M,{ref_key:"routineInput",ref:C,name:"routine",placeholder:n.$t("addNewRoutine"),modelValue:w.value,"onUpdate:modelValue":u[0]||(u[0]=f=>w.value=f)},null,8,["placeholder","modelValue"]),d(A,{name:"category",placeholder:n.$t("addNewCategory"),options:R(e).categories,"model-value":m.value,"onUpdate:modelValue":u[1]||(u[1]=f=>m.value=f)},null,8,["placeholder","options","model-value"]),d(L,{disabled:_.value,type:"submit"},{default:b(()=>[N(h(n.$t("addRoutine")),1)]),_:1},8,["disabled"])],32)]),g.value||s.value?(a(),i("div",_e,[g.value?(a(),x(ue,{key:0,name:c.value,onSubmit:I,onClose:u[2]||(u[2]=f=>g.value=!1)},null,8,["name"])):B("",!0),s.value?(a(),x(le,{key:1,name:p.value,onConfirm:u[3]||(u[3]=f=>(R(r)(p.value),s.value=!1)),onCancel:u[4]||(u[4]=f=>s.value=!1)},null,8,["name"])):B("",!0)])):B("",!0)],64))}};export{Ce as default};
